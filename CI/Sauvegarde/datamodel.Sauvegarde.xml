<?xml version="1.0" encoding="UTF-8"?>
<itop_design
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="1.0">
	<classes>
		<class id="ScaleOutRepository" _delta="define">
			<parent>Typology</parent>
			<properties>
				<category>bizmodel,searchable</category>
				<abstract>false</abstract>
				<key_type>autoincrement</key_type>
				<db_table>scaleoutrepository</db_table>
				<db_key_field>id</db_key_field>
				<db_final_class_field />
				<naming>
					<attributes>
						<attribute id="name" />
					</attributes>
				</naming>
				<display_template />
				<icon />
				<reconciliation>
					<attributes>
						<attribute id="name" />
					</attributes>
				</reconciliation>
				<uniqueness_rules>
					<rule id="name">
						<attributes>
							<attribute id="name" />
						</attributes>
						<is_blocking>true</is_blocking>
					</rule>
				</uniqueness_rules>
			</properties>
			<fields>
				<field id="sauvegardes_list" xsi:type="AttributeLinkedSet">
					<linked_class>BaseSauvegarde</linked_class>
					<ext_key_to_me>scaleoutrepository_id</ext_key_to_me>
					<edit_mode>add_only</edit_mode>
					<count_min>0</count_min>
					<count_max>0</count_max>
					<duplicates />
				</field>
			</fields>
			<methods />
			<presentation>
				<details>
					<items>
						<item id="name">
							<rank>10</rank>
						</item>
						<item id="sauvegardes_list">
							<rank>20</rank>
						</item>
					</items>
				</details>
				<search>
					<items>
						<item id="name">
							<rank>10</rank>
						</item>
					</items>
				</search>
				<list>
					<items>
						<item id="name">
							<rank>10</rank>
						</item>
					</items>
				</list>
			</presentation>
		</class>
		<class id="BaseSauvegarde" _delta="define">
			<parent>cmdbAbstractObject</parent>
			<properties>
				<category>bizmodel,searchable</category>
				<abstract>true</abstract>
				<key_type>autoincrement</key_type>
				<db_table>basesauvegarde</db_table>
				<db_key_field>id</db_key_field>
				<db_final_class_field>finalclass</db_final_class_field>
				<naming>
					<attributes>
						<attribute id="name" />
					</attributes>
				</naming>
				<display_template />
				<reconciliation>
					<attributes>
						<attribute id="name" />
						<attribute id="org_id" />
						<attribute id="organization_name" />
					</attributes>
				</reconciliation>
				<uniqueness_rules>
					<rule id="name">
						<attributes>
							<attribute id="name" />
						</attributes>
						<is_blocking>true</is_blocking>
					</rule>
				</uniqueness_rules>
				<obsolescence>
          			<condition><![CDATA[status='inactive']]></condition>
        		</obsolescence>
			</properties>
			<fields>
				<field id="name" xsi:type="AttributeString">
					<sql>name</sql>
					<default_value />
					<is_null_allowed>false</is_null_allowed>
				</field>
				<field id="org_id" xsi:type="AttributeExternalKey">
					<sql>org_id</sql>
					<target_class>Organization</target_class>
					<is_null_allowed>false</is_null_allowed>
					<on_target_delete>DEL_MANUAL</on_target_delete>
				</field>
				<field id="organization_name"
					xsi:type="AttributeExternalField">
					<extkey_attcode>org_id</extkey_attcode>
					<target_attcode>name</target_attcode>
				</field>
				<field id="organization_uniq_id"
					xsi:type="AttributeExternalField">
					<extkey_attcode>org_id</extkey_attcode>
					<target_attcode>code</target_attcode>
				</field>
				<field id="business_criticity" xsi:type="AttributeEnum">
					<values>
						<value id="high">high</value>
						<value id="medium">medium</value>
						<value id="low">low</value>
					</values>
					<sql>business_criticity</sql>
					<default_value>low</default_value>
					<is_null_allowed>true</is_null_allowed>
					<display_style>list</display_style>
				</field>
				<field id="status" xsi:type="AttributeEnum">
					<values>
						<value id="active">active</value>
						<value id="inactive">inactive</value>
					</values>
					<sql>status</sql>
					<default_value />
					<is_null_allowed>true</is_null_allowed>
					<display_style>list</display_style>
				</field>
				<field id="server_id" xsi:type="AttributeExternalKey">
					<sql>server_id</sql>
					<target_class>VirtualMachine</target_class>
					<is_null_allowed>false</is_null_allowed>
					<on_target_delete>DEL_MANUAL</on_target_delete>
					<allow_target_creation>false</allow_target_creation>
				</field>
				<field id="server_name" xsi:type="AttributeExternalField">
					<extkey_attcode>server_id</extkey_attcode>
					<target_attcode>name</target_attcode>
				</field>
				<field id="functionalcis_list"
					xsi:type="AttributeLinkedSetIndirect">
					<linked_class>lnkFunctionalCIToBackup</linked_class>
					<ext_key_to_me>backup_id</ext_key_to_me>
					<count_min>0</count_min>
					<count_max>0</count_max>
					<ext_key_to_remote>functionalci_id</ext_key_to_remote>
					<duplicates>false</duplicates>
				</field>
				<field id="windows_enable" xsi:type="AttributeEnum">
					<values>
						<value id="yes">yes</value>
						<value id="no">no</value>
					</values>
					<sql>windows_enable</sql>
					<default_value>no</default_value>
					<is_null_allowed>false</is_null_allowed>
					<display_style>radio_horizontal</display_style>
				</field>
				<field id="windows_fromhours" xsi:type="AttributeInteger">
					<sql>windows_fromhours</sql>
					<default_value>00</default_value>
					<is_null_allowed>true</is_null_allowed>
				</field>
				<field id="windows_tohours" xsi:type="AttributeInteger">
					<sql>windows_tohours</sql>
					<default_value>24</default_value>
					<is_null_allowed>true</is_null_allowed>
				</field>
				<field id="at_time" xsi:type="AttributeString">
					<sql>at_time</sql>
					<default_value />
					<is_null_allowed>false</is_null_allowed>
				</field>
				<field id="scaleoutrepository_id"
					xsi:type="AttributeExternalKey">
					<sql>scaleoutrepository_id</sql>
					<target_class>ScaleOutRepository</target_class>
					<is_null_allowed>true</is_null_allowed>
					<on_target_delete>DEL_MANUAL</on_target_delete>
				</field>
				<field id="scaleoutrepository_name"
					xsi:type="AttributeExternalField">
					<extkey_attcode>scaleoutrepository_id</extkey_attcode>
					<target_attcode>name</target_attcode>
				</field>
			</fields>
			<methods />
			<presentation />
		</class>
		<class id="BaseRulesSauvegarde" _delta="define">
			<parent>BaseSauvegarde</parent>
			<properties>
				<category>bizmodel,searchable</category>
				<abstract>true</abstract>
				<key_type>autoincrement</key_type>
				<db_table>baserulessauvegarde</db_table>
				<db_key_field>id</db_key_field>
				<db_final_class_field>finalclass</db_final_class_field>
				<naming>
					<attributes>
						<attribute id="name" />
					</attributes>
				</naming>
				<display_template />
				<reconciliation>
					<attributes>
						<attribute id="name" />
						<attribute id="org_id" />
						<attribute id="organization_name" />
					</attributes>
				</reconciliation>
			</properties>
			<fields>
				<field id="retention_type" xsi:type="AttributeEnum">
					<values>
						<value id="restorepoint">restorepoint</value>
						<value id="day">day</value>
					</values>
					<sql>retention_type</sql>
					<default_value>day</default_value>
					<is_null_allowed>false</is_null_allowed>
					<display_style>list</display_style>
				</field>
				<field id="nbretention" xsi:type="AttributeInteger">
					<sql>nbretention</sql>
					<default_value>7</default_value>
					<is_null_allowed>false</is_null_allowed>
				</field>
				<field id="algorythme" xsi:type="AttributeEnum">
					<values>
						<value id="incremental">incremental</value>
						<value id="decremental">decremental</value>
						<value id="differential">differential</value>
					</values>
					<sql>algorythme</sql>
					<default_value>incremental</default_value>
					<is_null_allowed>false</is_null_allowed>
					<display_style>list</display_style>
				</field>
				<field id="fullbackup_enable" xsi:type="AttributeEnum">
					<values>
						<value id="yes">yes</value>
						<value id="no">no</value>
					</values>
					<sql>fullbackup_enable</sql>
					<default_value>no</default_value>
					<is_null_allowed>false</is_null_allowed>
					<display_style>radio_horizontal</display_style>
				</field>
				<field id="fullbackup_day" xsi:type="AttributeEnum">
					<values>
						<value id="sunday">sunday</value>
						<value id="monday">monday</value>
						<value id="tuesday">tuesday</value>
						<value id="wednesday">wednesday</value>
						<value id="thursday">thursday</value>
						<value id="friday">friday</value>
						<value id="saturday">saturday</value>
					</values>
					<sql>fullbackup_day</sql>
					<default_value>sunday</default_value>
					<is_null_allowed>false</is_null_allowed>
					<display_style>list</display_style>
				</field>
				<field id="repository_id" xsi:type="AttributeExternalKey">
					<sql>repository_id</sql>
					<target_class>VirtualMachine</target_class>
					<is_null_allowed>true</is_null_allowed>
					<on_target_delete>DEL_MANUAL</on_target_delete>
					<allow_target_creation>false</allow_target_creation>
				</field>
				<field id="repository_name" xsi:type="AttributeExternalField">
					<extkey_attcode>repository_id</extkey_attcode>
					<target_attcode>name</target_attcode>
				</field>
			</fields>
			<methods />
			<presentation />
		</class>
		<class id="Backup" _delta="define">
			<parent>BaseRulesSauvegarde</parent>
			<properties>
				<category>bizmodel,searchable</category>
				<abstract>false</abstract>
				<key_type>autoincrement</key_type>
				<db_table>backup</db_table>
				<db_key_field>id</db_key_field>
				<db_final_class_field />
				<icon>images/backup.png</icon>
				<naming>
					<attributes>
						<attribute id="name" />
						<!--<attribute id="server_name" />
						<attribute id="repository_name" />-->
					</attributes>
				</naming>
				<display_template />
				<reconciliation>
					<attributes>
						<attribute id="name" />
						<attribute id="server_id" />
						<attribute id="server_name" />
						<attribute id="repository_id" />
						<attribute id="repository_name" />
					</attributes>
				</reconciliation>
			</properties>
			<fields>
			</fields>
			<methods />
			<presentation>
				<details>
					<items>
						<item id="functionalcis_list">
							<rank>10</rank>
						</item>
						<item id="col:col1">
							<rank>40</rank>
							<items>
								<item id="fieldset:BaseSauvegarde:baseinfo">
									<rank>10</rank>
									<items>
										<item id="name">
											<rank>10</rank>
										</item>
										<item id="org_id">
											<rank>20</rank>
										</item>
										<item id="organization_uniq_id">
											<rank>25</rank>
										</item>
										<item id="status">
											<rank>30</rank>
										</item>
										<item id="server_id">
											<rank>40</rank>
										</item>
									</items>
								</item>
								<item id="fieldset:BaseSauvegarde:window">
									<rank>20</rank>
									<items>
										<item id="windows_enable">
											<rank>10</rank>
										</item>
										<item id="windows_fromhours">
											<rank>20</rank>
										</item>
										<item id="windows_tohours">
											<rank>30</rank>
										</item>
										<item id="at_time">
											<rank>40</rank>
										</item>
									</items>
								</item>
							</items>
						</item>
						<item id="col:col2">
							<rank>50</rank>
							<items>
								<item id="fieldset:Backup:details">
									<rank>10</rank>
									<items>
										<item id="retention_type">
											<rank>10</rank>
										</item>
										<item id="nbretention">
											<rank>20</rank>
										</item>
										<item id="algorythme">
											<rank>30</rank>
										</item>
										<item id="fullbackup_enable">
											<rank>40</rank>
										</item>
										<item id="fullbackup_day">
											<rank>50</rank>
										</item>
										<item id="repository_id">
											<rank>60</rank>
										</item>
										<item id="scaleoutrepository_id">
											<rank>70</rank>
										</item>
									</items>
								</item>
							</items>
						</item>
					</items>
				</details>
				<default_search>
					<items>
						<item id="name">
							<rank>10</rank>
						</item>
						<item id="server_id">
							<rank>12</rank>
						</item>
						<item id="repository_id">
							<rank>16</rank>
						</item>
						<item id="org_id">
							<rank>20</rank>
						</item>
						<item id="status">
							<rank>30</rank>
						</item>
						<item id="at_time">
							<rank>50</rank>
						</item>
					</items>
				</default_search>
				<search>
					<items>
						<item id="name">
							<rank>10</rank>
						</item>
						<item id="server_id">
							<rank>12</rank>
						</item>
						<item id="repository_id">
							<rank>16</rank>
						</item>
						<item id="org_id">
							<rank>20</rank>
						</item>
						<item id="status">
							<rank>30</rank>
						</item>
						<item id="at_time">
							<rank>50</rank>
						</item>
					</items>
				</search>
				<list>
					<items>
						<item id="name">
							<rank>10</rank>
						</item>
						<item id="server_id">
							<rank>12</rank>
						</item>
						<item id="repository_id">
							<rank>16</rank>
						</item><item id="org_id">
							<rank>20</rank>
						</item>
						<item id="status">
							<rank>30</rank>
						</item>
						<item id="at_time">
							<rank>50</rank>
						</item>
					</items>
				</list>
			</presentation>
		</class>
		<class id="Replication" _delta="define">
			<parent>BaseSauvegarde</parent>
			<properties>
				<category>bizmodel,searchable</category>
				<abstract>false</abstract>
				<key_type>autoincrement</key_type>
				<db_table>replication</db_table>
				<db_key_field>id</db_key_field>
				<db_final_class_field />
				<icon>images/replicats.jpg</icon>
				<naming>
					<attributes>
						<attribute id="name" />
						<!--<attribute id="organization_name" />
						<attribute id="vcenter_name" />-->
					</attributes>
				</naming>
				<display_template />
				<reconciliation>
					<attributes>
						<attribute id="name" />
						<attribute id="org_id" />
						<attribute id="organization_name" />
						<attribute id="vcenter_id" />
						<attribute id="vcenter_name" />
					</attributes>
				</reconciliation>
			</properties>
			<fields>
				<field id="postpend" xsi:type="AttributeString">
					<sql>postpend</sql>
					<default_value>_replica</default_value>
					<is_null_allowed>false</is_null_allowed>
				</field>
				<field id="vcenter_id" xsi:type="AttributeExternalKey">
					<sql>vcenter_id</sql>
					<target_class>VCenter</target_class>
					<is_null_allowed>false</is_null_allowed>
					<on_target_delete>DEL_MANUAL</on_target_delete>
					<allow_target_creation>false</allow_target_creation>
				</field>
				<field id="vcenter_name" xsi:type="AttributeExternalField">
					<extkey_attcode>vcenter_id</extkey_attcode>
					<target_attcode>name</target_attcode>
				</field>
				<field id="virtualhost_id" xsi:type="AttributeExternalKey">
					<sql>virtualhost_id</sql>
					<target_class>VirtualHost</target_class>
					<is_null_allowed>false</is_null_allowed>
					<on_target_delete>DEL_MANUAL</on_target_delete>
				</field>
				<field id="virtualhost_name" xsi:type="AttributeExternalField">
					<extkey_attcode>virtualhost_id</extkey_attcode>
					<target_attcode>name</target_attcode>
				</field>
				<field id="vmfolder" xsi:type="AttributeString">
					<sql>vmfolder</sql>
					<default_value />
					<is_null_allowed>false</is_null_allowed>
				</field>
				<field id="logicalvolume_id" xsi:type="AttributeExternalKey">
					<sql>logicalvolume_id</sql>
					<target_class>LogicalVolume</target_class>
					<is_null_allowed>false</is_null_allowed>
					<on_target_delete>DEL_MANUAL</on_target_delete>
				</field>
				<field id="logicalvolume_name"
					xsi:type="AttributeExternalField">
					<extkey_attcode>logicalvolume_id</extkey_attcode>
					<target_attcode>name</target_attcode>
				</field>
			</fields>
			<methods />
			<presentation>
				<details>
					<items>
						<item id="functionalcis_list">
							<rank>10</rank>
						</item>
						<item id="col:col1">
							<rank>40</rank>
							<items>
								<item id="fieldset:BaseSauvegarde:baseinfo">
									<rank>10</rank>
									<items>
										<item id="name">
											<rank>10</rank>
										</item>
										<item id="org_id">
											<rank>20</rank>
										</item>
										<item id="organization_uniq_id">
											<rank>25</rank>
										</item>
										<item id="status">
											<rank>30</rank>
										</item>
										<item id="server_id">
											<rank>40</rank>
										</item>
									</items>
								</item>
								<item id="fieldset:BaseSauvegarde:window">
									<rank>20</rank>
									<items>
										<item id="windows_enable">
											<rank>10</rank>
										</item>
										<item id="windows_fromhours">
											<rank>20</rank>
										</item>
										<item id="windows_tohours">
											<rank>30</rank>
										</item>
										<item id="at_time">
											<rank>40</rank>
										</item>
									</items>
								</item>
							</items>
						</item>
						<item id="col:col2">
							<rank>50</rank>
							<items>
								<item id="fieldset:Replication:details">
									<rank>10</rank>
									<items>
										<item id="postpend">
											<rank>10</rank>
										</item>
										<item id="vcenter_id">
											<rank>20</rank>
										</item>
										<item id="virtualhost_id">
											<rank>30</rank>
										</item>
										<item id="vmfolder">
											<rank>40</rank>
										</item>
										<item id="logicalvolume_id">
											<rank>50</rank>
										</item>
									</items>
								</item>
							</items>
						</item>
					</items>
				</details>
				<default_search>
					<items>
						<item id="name">
							<rank>10</rank>
						</item>
						<item id="vcenter_id">
							<rank>15</rank>
						</item>
						<item id="org_id">
							<rank>20</rank>
						</item>
						<item id="status">
							<rank>30</rank>
						</item>
						<item id="server_id">
							<rank>40</rank>
						</item>
						<item id="at_time">
							<rank>50</rank>
						</item>
					</items>
				</default_search>
				<search>
					<items>
						<item id="name">
							<rank>10</rank>
						</item>
						<item id="vcenter_id">
							<rank>15</rank>
						</item>
						<item id="org_id">
							<rank>20</rank>
						</item>
						<item id="status">
							<rank>30</rank>
						</item>
						<item id="server_id">
							<rank>40</rank>
						</item>
						<item id="at_time">
							<rank>50</rank>
						</item>
					</items>
				</search>
				<list>
					<items>
						<item id="name">
							<rank>10</rank>
						</item>
						<item id="vcenter_id">
							<rank>15</rank>
						</item>
						<item id="org_id">
							<rank>20</rank>
						</item>
						<item id="status">
							<rank>30</rank>
						</item>
						<item id="server_id">
							<rank>40</rank>
						</item>
						<item id="at_time">
							<rank>50</rank>
						</item>
					</items>
				</list>
			</presentation>
		</class>
		<class id="BackupCopy" _delta="define">
			<parent>BaseRulesSauvegarde</parent>
			<properties>
				<category>bizmodel,searchable</category>
				<abstract>false</abstract>
				<key_type>autoincrement</key_type>
				<db_table>backupcopy</db_table>
				<db_key_field>id</db_key_field>
				<db_final_class_field />
				<icon>images/backupcopy.png</icon>
				<naming>
					<attributes>
						<attribute id="name" />
						<!--<attribute id="server_name" />
						<attribute id="repository_name" />-->
					</attributes>
				</naming>
				<display_template />
				<reconciliation>
					<attributes>
						<attribute id="name" />
						<attribute id="server_id" />
						<attribute id="server_name" />
						<attribute id="repository_id" />
						<attribute id="repository_name" />
					</attributes>
				</reconciliation>
			</properties>
			<fields>
			</fields>
			<methods />
			<presentation>
				<details>
					<items>
						<item id="functionalcis_list">
							<rank>10</rank>
						</item>
						<item id="col:col1">
							<rank>40</rank>
							<items>
								<item id="fieldset:BaseSauvegarde:baseinfo">
									<rank>10</rank>
									<items>
										<item id="name">
											<rank>10</rank>
										</item>
										<item id="org_id">
											<rank>20</rank>
										</item>
										<item id="organization_uniq_id">
											<rank>25</rank>
										</item>
										<item id="status">
											<rank>30</rank>
										</item>
										<item id="server_id">
											<rank>40</rank>
										</item>
									</items>
								</item>
								<item id="fieldset:BaseSauvegarde:window">
									<rank>20</rank>
									<items>
										<item id="windows_enable">
											<rank>10</rank>
										</item>
										<item id="windows_fromhours">
											<rank>20</rank>
										</item>
										<item id="windows_tohours">
											<rank>30</rank>
										</item>
										<item id="at_time">
											<rank>40</rank>
										</item>
									</items>
								</item>
							</items>
						</item>
						<item id="col:col2">
							<rank>50</rank>
							<items>
								<item id="fieldset:Backup:details">
									<rank>10</rank>
									<items>
										<item id="retention_type">
											<rank>10</rank>
										</item>
										<item id="nbretention">
											<rank>20</rank>
										</item>
										<item id="algorythme">
											<rank>30</rank>
										</item>
										<item id="fullbackup_enable">
											<rank>40</rank>
										</item>
										<item id="fullbackup_day">
											<rank>50</rank>
										</item>
										<item id="repository_id">
											<rank>60</rank>
										</item>
										<item id="scaleoutrepository_id">
											<rank>70</rank>
										</item>
									</items>
								</item>
							</items>
						</item>
					</items>
				</details>
				<default_search>
					<items>
						<item id="name">
							<rank>10</rank>
						</item>
						<item id="server_id">
							<rank>12</rank>
						</item>
						<item id="repository_id">
							<rank>16</rank>
						</item>
						<item id="org_id">
							<rank>20</rank>
						</item>
						<item id="status">
							<rank>30</rank>
						</item>
						<item id="at_time">
							<rank>50</rank>
						</item>
					</items>
				</default_search>
				<search>
					<items>
						<item id="name">
							<rank>10</rank>
						</item>
						<item id="server_id">
							<rank>12</rank>
						</item>
						<item id="repository_id">
							<rank>16</rank>
						</item>
						<item id="org_id">
							<rank>20</rank>
						</item>
						<item id="status">
							<rank>30</rank>
						</item>
						<item id="at_time">
							<rank>50</rank>
						</item>
					</items>
				</search>
				<list>
					<items>
						<item id="name">
							<rank>10</rank>
						</item>
						<item id="server_id">
							<rank>12</rank>
						</item>
						<item id="repository_id">
							<rank>16</rank>
						</item>
						<item id="org_id">
							<rank>20</rank>
						</item>
						<item id="status">
							<rank>30</rank>
						</item>
						<item id="at_time">
							<rank>50</rank>
						</item>
					</items>
				</list>
			</presentation>
		</class>
		<class id="VMCopy" _delta="define">
			<parent>BaseSauvegarde</parent>
			<properties>
				<category>bizmodel,searchable</category>
				<abstract>false</abstract>
				<key_type>autoincrement</key_type>
				<db_table>vmcopy</db_table>
				<db_key_field>id</db_key_field>
				<db_final_class_field />
				<icon>images/vmcopy.png</icon>
				<naming>
					<attributes>
						<attribute id="name" />
					</attributes>
				</naming>
				<display_template />
				<reconciliation>
					<attributes>
						<attribute id="name" />
					</attributes>
				</reconciliation>
			</properties>
			<fields></fields>
			<methods />
			<presentation>
				<details>
					<items>
						<item id="functionalcis_list">
							<rank>10</rank>
						</item>
						<item id="col:col1">
							<rank>40</rank>
							<items>
								<item id="fieldset:BaseSauvegarde:baseinfo">
									<rank>10</rank>
									<items>
										<item id="name">
											<rank>10</rank>
										</item>
										<item id="org_id">
											<rank>20</rank>
										</item>
										<item id="organization_uniq_id">
											<rank>25</rank>
										</item>
										<item id="status">
											<rank>30</rank>
										</item>
										<item id="server_id">
											<rank>40</rank>
										</item>
									</items>
								</item>
								<item id="fieldset:BaseSauvegarde:window">
									<rank>20</rank>
									<items>
										<item id="windows_enable">
											<rank>10</rank>
										</item>
										<item id="windows_fromhours">
											<rank>20</rank>
										</item>
										<item id="windows_tohours">
											<rank>30</rank>
										</item>
										<item id="at_time">
											<rank>40</rank>
										</item>
									</items>
								</item>
							</items>
						</item>
					</items>
				</details>
				<default_search>
					<items>
						<item id="name">
							<rank>10</rank>
						</item>
						<item id="server_id">
							<rank>12</rank>
						</item>
						<item id="org_id">
							<rank>20</rank>
						</item>
						<item id="status">
							<rank>30</rank>
						</item>
						<item id="at_time">
							<rank>50</rank>
						</item>
					</items>
				</default_search>
				<search>
					<items>
						<item id="name">
							<rank>10</rank>
						</item>
						<item id="server_id">
							<rank>12</rank>
						</item>
						<item id="org_id">
							<rank>20</rank>
						</item>
						<item id="status">
							<rank>30</rank>
						</item>
						<item id="at_time">
							<rank>50</rank>
						</item>
					</items>
				</search>
				<list>
					<items>
						<item id="name">
							<rank>10</rank>
						</item>
						<item id="server_id">
							<rank>12</rank>
						</item>
						<item id="org_id">
							<rank>20</rank>
						</item>
						<item id="status">
							<rank>30</rank>
						</item>
						<item id="at_time">
							<rank>50</rank>
						</item>
					</items>
				</list>
			</presentation>
		</class>
		<class id="FileCopy" _delta="define">
			<parent>BaseSauvegarde</parent>
			<properties>
				<category>bizmodel,searchable</category>
				<abstract>false</abstract>
				<key_type>autoincrement</key_type>
				<db_table>filecopy</db_table>
				<db_key_field>id</db_key_field>
				<db_final_class_field />
				<icon>images/filecopy.jpg</icon>
				<naming>
					<attributes>
						<attribute id="name" />
					</attributes>
				</naming>
				<display_template />
				<reconciliation>
					<attributes>
						<attribute id="name" />
					</attributes>
				</reconciliation>
			</properties>
			<fields>
				<field id="vmfolder" xsi:type="AttributeString">
					<sql>vmfolder</sql>
					<default_value />
					<is_null_allowed>false</is_null_allowed>
				</field>
			</fields>
			<methods />
			<presentation>
				<details>
					<items>
						<item id="functionalcis_list">
							<rank>10</rank>
						</item>
						<item id="col:col1">
							<rank>40</rank>
							<items>
								<item id="fieldset:BaseSauvegarde:baseinfo">
									<rank>10</rank>
									<items>
										<item id="name">
											<rank>10</rank>
										</item>
										<item id="org_id">
											<rank>20</rank>
										</item>
										<item id="organization_uniq_id">
											<rank>25</rank>
										</item>
										<item id="status">
											<rank>30</rank>
										</item>
										<item id="server_id">
											<rank>40</rank>
										</item>
										<item id="vmfolder">
											<rank>50</rank>
										</item>
									</items>
								</item>
								<item id="fieldset:BaseSauvegarde:window">
									<rank>20</rank>
									<items>
										<item id="windows_enable">
											<rank>10</rank>
										</item>
										<item id="windows_fromhours">
											<rank>20</rank>
										</item>
										<item id="windows_tohours">
											<rank>30</rank>
										</item>
										<item id="at_time">
											<rank>40</rank>
										</item>
									</items>
								</item>
							</items>
						</item>
					</items>
				</details>
				<default_search>
					<items>
						<item id="name">
							<rank>10</rank>
						</item>
						<item id="server_id">
							<rank>15</rank>
						</item>
						<item id="org_id">
							<rank>20</rank>
						</item>
						<item id="status">
							<rank>30</rank>
						</item>
						<item id="at_time">
							<rank>50</rank>
						</item>
					</items>
				</default_search>
				<search>
					<items>
						<item id="name">
							<rank>10</rank>
						</item>
						<item id="server_id">
							<rank>15</rank>
						</item>
						<item id="org_id">
							<rank>20</rank>
						</item>
						<item id="status">
							<rank>30</rank>
						</item>
						<item id="at_time">
							<rank>50</rank>
						</item>
					</items>
				</search>
				<list>
					<items>
						<item id="name">
							<rank>10</rank>
						</item>
						<item id="server_id">
							<rank>15</rank>
						</item>
						<item id="org_id">
							<rank>20</rank>
						</item>
						<item id="status">
							<rank>30</rank>
						</item>
						<item id="at_time">
							<rank>50</rank>
						</item>
					</items>
				</list>
			</presentation>
		</class>
		<class id="lnkFunctionalCIToBackup" _delta="define">
			<parent>cmdbAbstractObject</parent>
			<properties>
				<category>bizmodel</category>
				<abstract>false</abstract>
				<db_table>lnkfunctionalcitobackup</db_table>
				<naming>
					<attributes>
						<attribute id="backup_id" />
						<attribute id="functionalci_id" />
					</attributes>
				</naming>
				<reconciliation>
					<attributes>
						<attribute id="backup_id" />
						<attribute id="functionalci_id" />
					</attributes>
				</reconciliation>
			</properties>
			<fields>
				<field id="backup_id" xsi:type="AttributeExternalKey">
					<sql>backup_id</sql>
					<is_null_allowed>false</is_null_allowed>
					<target_class>BaseSauvegarde</target_class>
					<on_target_delete>DEL_MANUAL</on_target_delete>
				</field>
				<field id="backup_name" xsi:type="AttributeExternalField">
					<extkey_attcode>backup_id</extkey_attcode>
					<target_attcode>name</target_attcode>
				</field>
				<field id="functionalci_id" xsi:type="AttributeExternalKey">
					<sql>functionalci_id</sql>
					<target_class>FunctionalCI</target_class>
					<filter><![CDATA[SELECT FunctionalCI WHERE finalclass IN ('Server','Hypervisor','VirtualMachine','VCenter','NetworkDevice','SANSwitch','SoftwareInstance')]]></filter>
					<is_null_allowed>false</is_null_allowed>
					<on_target_delete>DEL_MANUAL</on_target_delete>
				</field>
				<field id="functionalci_name"
					xsi:type="AttributeExternalField">
					<extkey_attcode>functionalci_id</extkey_attcode>
					<target_attcode>name</target_attcode>
				</field>
			</fields>
			<methods />
			<presentation>
				<list>
					<items>
						<item id="backup_id">
							<rank>10</rank>
						</item>
						<item id="functionalci_id">
							<rank>20</rank>
						</item>
					</items>
				</list>
				<search>
					<items>
						<item id="backup_id">
							<rank>10</rank>
						</item>
						<item id="functionalci_id">
							<rank>20</rank>
						</item>
					</items>
				</search>
				<details>
					<items>
						<item id="backup_id">
							<rank>10</rank>
						</item>
						<item id="functionalci_id">
							<rank>20</rank>
						</item>
					</items>
				</details>
			</presentation>
		</class>
		<class id="FunctionalCI" _delta="merge">
			<fields>
				<field id="backups_list" xsi:type="AttributeLinkedSetIndirect"
					_delta="define">
					<linked_class>lnkFunctionalCIToBackup</linked_class>
					<ext_key_to_me>functionalci_id</ext_key_to_me>
					<count_min>0</count_min>
					<count_max>0</count_max>
					<ext_key_to_remote>backup_id</ext_key_to_remote>
					<duplicates>false</duplicates>
				</field>
				<field id="overview" xsi:type="AttributeDashboard"
					_delta="if_exists">
					<definition _delta="merge">
						<cells>
							<cell id="200" _delta="define">
								<rank>10</rank>
								<dashlets>
									<dashlet id="201" xsi:type="DashletHeaderDynamic"
										_delta="define">
										<rank>0</rank>
										<title>CI:Overview:Sauvegarde</title>
										<icon>Sauvegarde/images/backup.png</icon>
										<subtitle>CI:Overview:Sauvegarde:subtitle</subtitle>
										<query><![CDATA[SELECT BaseSauvegarde AS BS JOIN lnkFunctionalCIToBackup AS LFB ON LFB.backup_id=BS.id WHERE LFB.functionalci_id=:this->id]]></query>
										<group_by>finalclass</group_by>
										<values>Backup,Replication,BackupCopy,VMCopy,FileCopy</values>
									</dashlet>
									<dashlet id="202" xsi:type="DashletObjectList"
										_delta="define">
										<rank>2</rank>
										<title>CI:Overview:Sauvegarde</title>
										<query><![CDATA[SELECT BaseSauvegarde AS BS JOIN lnkFunctionalCIToBackup AS LFB ON LFB.backup_id=BS.id WHERE LFB.functionalci_id=:this->id]]></query>
										<menu>false</menu>
									</dashlet>
								</dashlets>
							</cell>
						</cells>
					</definition>
				</field>
			</fields>
			<methods />
			<presentation>
				<details _delta="merge">
					<items>
						<item id="backups_list" _delta="define">
							<rank>100</rank>
						</item>
					</items>
				</details>
			</presentation>
		</class>
		<class id="VirtualMachine" _delta="merge">
			<presentation>
				<details _delta="merge">
					<items>
						<item id="backups_list" _delta="define">
							<rank>200</rank>
						</item>
					</items>
				</details>
			</presentation>
		</class>
		<class id="Server" _delta="merge">
			<presentation>
				<details _delta="merge">
					<items>
						<item id="backups_list" _delta="define">
							<rank>200</rank>
						</item>
					</items>
				</details>
			</presentation>
		</class>
		<class id="NetworkDevice" _delta="merge">
			<presentation>
				<details _delta="merge">
					<items>
						<item id="backups_list" _delta="define">
							<rank>200</rank>
						</item>
					</items>
				</details>
			</presentation>
		</class>
		<class id="SANSwitch" _delta="merge">
			<presentation>
				<details _delta="merge">
					<items>
						<item id="backups_list" _delta="define">
							<rank>200</rank>
						</item>
					</items>
				</details>
			</presentation>
		</class>
		<class id="DBServer" _delta="merge">
			<presentation>
				<details _delta="merge">
					<items>
						<item id="backups_list" _delta="define">
							<rank>200</rank>
						</item>
					</items>
				</details>
			</presentation>
		</class>
		<class id="WebServer" _delta="merge">
			<presentation>
				<details _delta="merge">
					<items>
						<item id="backups_list" _delta="define">
							<rank>200</rank>
						</item>
					</items>
				</details>
			</presentation>
		</class>
		<class id="StorageSystem" _delta="merge">
			<presentation>
				<details _delta="merge">
					<items>
						<item id="backups_list" _delta="define">
							<rank>200</rank>
						</item>
					</items>
				</details>
			</presentation>
		</class>
		<class id="NAS" _delta="merge">
			<presentation>
				<details _delta="merge">
					<items>
						<item id="backups_list" _delta="define">
							<rank>200</rank>
						</item>
					</items>
				</details>
			</presentation>
		</class>
		<class id="Hypervisor" _delta="merge">
			<presentation>
				<details _delta="merge">
					<items>
						<item id="backups_list" _delta="define">
							<rank>200</rank>
						</item>
					</items>
				</details>
			</presentation>
		</class>
		<class id="Printer" _delta="merge">
			<presentation>
				<details _delta="merge">
					<items>
						<item id="backups_list" _delta="define">
							<rank>200</rank>
						</item>
					</items>
				</details>
			</presentation>
		</class>
		<class id="PC" _delta="merge">
			<presentation>
				<details _delta="merge">
					<items>
						<item id="backups_list" _delta="define">
							<rank>200</rank>
						</item>
					</items>
				</details>
			</presentation>
		</class>
	</classes>
	<menus>
		<menu id="ConfigManagementOverview" xsi:type="DashboardMenuNode"
			_delta="must_exist">
			<definition>
				<cells>
					<!-- On s'ajoute a la software -->
					<cell id="Backup" _delta="define_if_not_exists">
						<dashlets>
							<dashlet id="CUSTOM_Backup_1" xsi:type="DashletHeaderStatic">
								<rank>0</rank>
								<title>Menu:Backup</title>
								<icon>Sauvegarde/images/backup.png</icon>
							 </dashlet>
							<dashlet id="CUSTOM_Backup_2" xsi:type="DashletBadge" _delta="define">
								<rank>1</rank>
								<class>Backup</class>
							</dashlet>
							<dashlet id="CUSTOM_Backup_3" xsi:type="DashletBadge" _delta="define">
								<rank>2</rank>
								<class>Replication</class>
							</dashlet>
							<dashlet id="CUSTOM_Backup_4" xsi:type="DashletBadge" _delta="define">
								<rank>3</rank>
								<class>BackupCopy</class>
							</dashlet>
							<dashlet id="CUSTOM_Backup_5" xsi:type="DashletBadge" _delta="define">
								<rank>4</rank>
								<class>VMCopy</class>
							</dashlet>
							<dashlet id="CUSTOM_Backup_6" xsi:type="DashletBadge" _delta="define">
								<rank>5</rank>
								<class>FileCopy</class>
							</dashlet>
						</dashlets>
					</cell>
				</cells>
			</definition>
		</menu>
		<menu id="Typology" xsi:type="DashboardMenuNode"
			_delta="must_exist">
			<definition>
				<cells>
					<cell id="Backup" _delta="define_if_not_exists">
						<dashlets>
							<dashlet id="CUSTOM_Backup_1" xsi:type="DashletHeaderStatic">
								<rank>0</rank>
								<title>Menu:Backup</title>
								<icon>Sauvegarde/images/backup.png</icon>
							 </dashlet>
							 <dashlet id="CUSTOM_Backup_2" xsi:type="DashletBadge" _delta="define">
								<rank>1</rank>
								<class>ScaleOutRepository</class>
							</dashlet>
						</dashlets>
					</cell>
				</cells>
			</definition>
		</menu>
	</menus>
	<user_rights>
		<groups>
			<group id="lnkSauvegardes" _delta="define">
				<classes>
					<class id="ScaleOutRepository" />
					<class id="BaseSauvegarde" />
					<class id="BaseRulesSauvegarde" />
					<class id="Backup" />
					<class id="Replication" />
					<class id="BackupCopy" />
					<class id="VMCopy" />
					<class id="FileCopy" />
					<class id="lnkFunctionalCIToBackup" />
				</classes>
			</group>
		</groups>
		<profiles>
			<profile id="3" _delta="must_exist">
				<groups _delta="merge">
					<group id="lnkSauvegardes" _delta="define">
						<actions>
							<action id="action:read">allow</action>
							<action id="action:bulk read">allow</action>
							<action id="action:write">allow</action>
							<action id="action:bulk write">allow</action>
							<action id="action:delete">allow</action>
						</actions>
					</group>
				</groups>
			</profile>
		</profiles>
	</user_rights>
</itop_design>
