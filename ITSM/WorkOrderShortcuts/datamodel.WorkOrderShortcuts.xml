<?xml version="1.0" encoding="UTF-8"?>
<itop_design xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="1.0">
  <menus>
		 <menu id="WorkOrderManagement" xsi:type="MenuGroup" _delta="define">
            <rank>40</rank>
			<enable_class>WorkOrder</enable_class>
            <enable_stimulus/>
			<style>
			        <decoration_classes>fas fa-list-alt</decoration_classes>
			</style>
        </menu>
		<menu id="WorkOrder:Overview" xsi:type="DashboardMenuNode" _delta="define">
            <rank>0</rank>
            <parent>WorkOrderManagement</parent>
            <definition>
                <layout>DashboardLayoutTwoCols</layout>
                <title>UI:IncidentMgmtMenuOverview:Title</title>
                <cells>
                    <cell id="0">
                        <rank>0</rank>
                        <dashlets>
                            <dashlet id="1" xsi:type="DashletObjectList">
								<rank>0</rank>
								<title>Tâches/WorkOrders qui me sont assign&#xE9;s</title>
								<query>SELECT WorkOrder WHERE agent_id = :current_contact_id AND status = "open"</query>
								<menu>true</menu>
							</dashlet>
                        </dashlets>
                    </cell>
                    <cell id="1">
                        <rank>1</rank>
                        <dashlets>
                            <dashlet id="17" xsi:type="DashletObjectList">
								<rank>0</rank>
								<title>Tâches/WorkOrders qui sont assign&#xE9;s a mon equipe</title>
								<query>SELECT WorkOrder JOIN Team ON WorkOrder.team_id = Team.id JOIN lnkPersonToTeam AS L ON L.team_id = Team.id WHERE L.person_id = :current_contact_id AND WorkOrder.status = "open" AND agent_id != :current_contact_id</query>
								<menu>true</menu>
							</dashlet>
                        </dashlets>
                    </cell>
                </cells>
            </definition>
        </menu>
		<menu id="NewWorkOrder" xsi:type="NewObjectMenuNode" _delta="define">
            <rank>1</rank>
            <parent>WorkOrderManagement</parent>
            <class>WorkOrder</class>
		</menu>
		<menu id="SearchWorkOrders" xsi:type="SearchMenuNode" _delta="define">
            <rank>2</rank>
            <parent>WorkOrderManagement</parent>
            <class>WorkOrder</class>
        </menu>
        <menu id="WorkOrder:Shortcuts" xsi:type="TemplateMenuNode" _delta="define">
            <rank>3</rank>
            <parent>WorkOrderManagement</parent>
            <template_file/>
        </menu>
		<menu id="WorkOrder:MyWorkOrders" xsi:type="OQLMenuNode" _delta="define">
            <rank>0</rank>
            <parent>WorkOrder:Shortcuts</parent>
            <oql><![CDATA[SELECT WorkOrder WHERE agent_id = :current_contact_id AND status NOT IN ("closed")]]></oql>
            <do_search/>
            <auto_reload>fast</auto_reload>
        </menu>
		<menu id="WorkOrdersIncidents" xsi:type="OQLMenuNode" _delta="define">
			<rank>10</rank>
            <parent>WorkOrder:Shortcuts</parent>
            <oql><![CDATA[SELECT WorkOrder AS WO JOIN Incident AS I ON WO.ticket_id=I.id WHERE WO.agent_id = :current_contact_id AND WO.status IN ('open')]]></oql>
            <do_search>1</do_search>
        </menu>
		<menu id="WorkOrdersUserRequest" xsi:type="OQLMenuNode" _delta="define">
			<rank>11</rank>
            <parent>WorkOrder:Shortcuts</parent>
            <oql><![CDATA[SELECT WorkOrder AS WO JOIN UserRequest AS I ON WO.ticket_id=I.id WHERE WO.agent_id = :current_contact_id AND WO.status IN ('open')]]></oql>
            <do_search>1</do_search>
        </menu>
		<menu id="WorkOrdersChange" xsi:type="OQLMenuNode" _delta="define">
			<rank>12</rank>
            <parent>WorkOrder:Shortcuts</parent>
            <oql><![CDATA[SELECT WorkOrder AS WO JOIN Change AS I ON WO.ticket_id=I.id WHERE WO.agent_id = :current_contact_id AND WO.status IN ('open')]]></oql>
            <do_search>1</do_search>
        </menu>
		<menu id="WorkOrdersAstreinte" xsi:type="OQLMenuNode" _delta="define">
			<rank>13</rank>
            <parent>WorkOrder:Shortcuts</parent>
            <oql><![CDATA[SELECT WorkOrder WHERE agent_id = :current_contact_id AND nonworkinghour_flag = "yes"]]></oql>
            <do_search>1</do_search>
        </menu>
  </menus>
</itop_design>
